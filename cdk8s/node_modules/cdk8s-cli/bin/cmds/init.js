"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
const sscaff_1 = require("sscaff");
const templatesDir = path.join(__dirname, '..', '..', 'templates');
const availableTemplates = fs.readdirSync(templatesDir);
class Command {
    constructor() {
        this.command = 'init TEMPLATE';
        this.describe = 'Create a new cdk8s project from a template';
        this.builder = (args) => args
            .positional('TEMPLATE', { demandOption: true })
            .choices('TEMPLATE', availableTemplates);
    }
    async handler(argv) {
        if (fs.readdirSync('.').length > 0) {
            console.error(`cannot initialize a project in a non-empty directory`);
            process.exit(1);
        }
        console.error(`Initializing a project from the ${argv.template} template`);
        const templatePath = path.join(templatesDir, argv.template);
        await sscaff_1.sscaff(templatePath, '.');
    }
}
module.exports = new Command();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImluaXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSx5QkFBeUI7QUFDekIsNkJBQTZCO0FBQzdCLG1DQUFnQztBQUVoQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ25FLE1BQU0sa0JBQWtCLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUV4RCxNQUFNLE9BQU87SUFBYjtRQUNrQixZQUFPLEdBQUcsZUFBZSxDQUFDO1FBQzFCLGFBQVEsR0FBRyw0Q0FBNEMsQ0FBQztRQUN4RCxZQUFPLEdBQUcsQ0FBQyxJQUFnQixFQUFFLEVBQUUsQ0FBQyxJQUFJO2FBQ2pELFVBQVUsQ0FBQyxVQUFVLEVBQUUsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLENBQUM7YUFDOUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0lBWTdDLENBQUM7SUFWUSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQVM7UUFDNUIsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDbEMsT0FBTyxDQUFDLEtBQUssQ0FBQyxzREFBc0QsQ0FBQyxDQUFDO1lBQ3RFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDakI7UUFFRCxPQUFPLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxJQUFJLENBQUMsUUFBUSxXQUFXLENBQUMsQ0FBQztRQUMzRSxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUQsTUFBTSxlQUFNLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Q0FDRjtBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHlhcmdzIGZyb20gJ3lhcmdzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBzc2NhZmYgfSBmcm9tICdzc2NhZmYnO1xuXG5jb25zdCB0ZW1wbGF0ZXNEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAnLi4nLCAndGVtcGxhdGVzJyk7XG5jb25zdCBhdmFpbGFibGVUZW1wbGF0ZXMgPSBmcy5yZWFkZGlyU3luYyh0ZW1wbGF0ZXNEaXIpO1xuXG5jbGFzcyBDb21tYW5kIGltcGxlbWVudHMgeWFyZ3MuQ29tbWFuZE1vZHVsZSB7XG4gIHB1YmxpYyByZWFkb25seSBjb21tYW5kID0gJ2luaXQgVEVNUExBVEUnO1xuICBwdWJsaWMgcmVhZG9ubHkgZGVzY3JpYmUgPSAnQ3JlYXRlIGEgbmV3IGNkazhzIHByb2plY3QgZnJvbSBhIHRlbXBsYXRlJztcbiAgcHVibGljIHJlYWRvbmx5IGJ1aWxkZXIgPSAoYXJnczogeWFyZ3MuQXJndikgPT4gYXJnc1xuICAgIC5wb3NpdGlvbmFsKCdURU1QTEFURScsIHsgZGVtYW5kT3B0aW9uOiB0cnVlIH0pXG4gICAgLmNob2ljZXMoJ1RFTVBMQVRFJywgYXZhaWxhYmxlVGVtcGxhdGVzKTtcblxuICBwdWJsaWMgYXN5bmMgaGFuZGxlcihhcmd2OiBhbnkpIHtcbiAgICBpZiAoZnMucmVhZGRpclN5bmMoJy4nKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBjYW5ub3QgaW5pdGlhbGl6ZSBhIHByb2plY3QgaW4gYSBub24tZW1wdHkgZGlyZWN0b3J5YCk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICBcbiAgICBjb25zb2xlLmVycm9yKGBJbml0aWFsaXppbmcgYSBwcm9qZWN0IGZyb20gdGhlICR7YXJndi50ZW1wbGF0ZX0gdGVtcGxhdGVgKTtcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBwYXRoLmpvaW4odGVtcGxhdGVzRGlyLCBhcmd2LnRlbXBsYXRlKTtcbiAgICBhd2FpdCBzc2NhZmYodGVtcGxhdGVQYXRoLCAnLicpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IENvbW1hbmQoKTsiXX0=